<!DOCTYPE html>
<html lang="en" data-theme="minimal">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Dear Student ¬∑ Learning Universe</title>
    <meta name="description" content="A magical learning journey">
    
    <!-- Preload critical assets -->
    <link rel="preload" href="../assets/sounds/ambient/morning-forest.mp3" as="audio">
    <link rel="preload" href="../assets/sprites/creatures/star.svg" as="image">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=EB+Garamond:ital,wght@0,400;0,600;1,400&family=Caveat:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="../assets/css/themes/minimal.css" id="theme-stylesheet">
    
    <style>
        /* Dynamic student color */
        :root {
            --student-hue: 18;
            --student-accent: hsl(var(--student-hue), 70%, 60%);
            --student-accent-soft: hsl(var(--student-hue), 60%, 95%);
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-content">
            <div class="magic-circle">
                <svg viewBox="0 0 200 200">
                    <circle cx="100" cy="100" r="80" class="circle-outer" />
                    <circle cx="100" cy="100" r="60" class="circle-middle" />
                    <circle cx="100" cy="100" r="40" class="circle-inner" />
                </svg>
            </div>
            <p class="loading-text">Preparing your magical journey...</p>
        </div>
    </div>

    <!-- Theme Toggle -->
    <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
        <span class="theme-icon-minimal">‚ú®</span>
        <span class="theme-icon-cosmic">üåô</span>
    </button>

    <!-- Living Background -->
    <div class="universe-container">
        <!-- WebGL Canvas for advanced effects -->
        <canvas id="magicCanvas"></canvas>
        
        <!-- Parallax Layers -->
        <div class="parallax-layer" data-depth="0.1">
            <div class="clouds"></div>
        </div>
        <div class="parallax-layer" data-depth="0.3">
            <div class="floating-elements"></div>
        </div>
        <div class="parallax-layer" data-depth="0.5">
            <div class="fireflies"></div>
        </div>
        
        <!-- Seasonal Overlay -->
        <div class="seasonal-overlay" id="seasonalOverlay"></div>
    </div>

    <!-- Learning Tree (Fixed Position) -->
    <div class="learning-tree-container">
        <div class="tree-stage" id="learningTree">
            <!-- Tree will be drawn here by tree.js -->
        </div>
        <div class="tree-info">
            <span class="visits-count">Visit #<span id="visitNumber">1</span></span>
            <span class="tree-stage-name" id="treeStageName">Seedling</span>
        </div>
    </div>

    <!-- Walking Animals Container -->
    <div class="animals-container" id="animalsContainer">
        <!-- Animated sprites will be added by creatures.js -->
    </div>

    <!-- Audio Controls -->
    <div class="audio-controls">
        <button class="audio-ambient active" id="ambientToggle" aria-label="Toggle ambient sounds">
            <svg viewBox="0 0 24 24">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 14.5v-9l6 4.5-6 4.5z"/>
            </svg>
        </button>
        <div class="volume-slider">
            <input type="range" id="volumeControl" min="0" max="100" value="50">
        </div>
    </div>

    <!-- Main Content -->
    <main class="content-wrapper">
        <!-- Hero Section -->
        <section class="hero-section" id="heroSection">
            <div class="hero-particles" id="heroParticles"></div>
            
            <div class="date-badge floating">22 July 2025</div>
            
            <h1 class="student-name magical-text">
                Dear Student
                <span class="name-sparkles"></span>
            </h1>
            
            <p class="hero-greeting">Welcome back to your learning universe</p>
            
            <!-- Student Avatar with Aura -->
            <div class="student-avatar-container">
                <div class="avatar-aura"></div>
                <div class="student-avatar" id="studentAvatar">
                    <div class="avatar-inner" data-initial="S"></div>
                </div>
            </div>
        </section>

        <!-- Today's Reflection -->
        <section class="content-card floating-card" data-sound="page-turn" data-creature="star">
            <div class="card-background-effect"></div>
            
            <header class="card-header">
                <div class="section-icon animated-icon">
                    <svg viewBox="0 0 48 48">
                        <path class="icon-path" d="M24 4l5.5 11.1L42 17l-9 8.8L35.1 38 24 32.2 12.9 38 15 25.8 6 17l12.5-1.9z"/>
                    </svg>
                </div>
                <h2 class="section-title">Today's Reflection</h2>
            </header>
            
            <div class="card-content touchable" data-read-aloud="true">
                <p class="reflection-text">
                    üåü Amazing work today, Alex! You asked the most important question of the day: 'Why can't we just add the bottoms?'. Your curiosity is what leads to real understanding! üöÄ
                </p>
            </div>
            
            <div class="tap-hint">Tap to hear ‚Ä¢ Long press for Hindi</div>
        </section>

        <!-- Learning Content -->
        <section class="content-card floating-card" data-sound="page-turn" data-creature="star">
            <div class="card-background-effect"></div>
            
            <!-- Subject Creature -->
            <div class="subject-creature-container">
                <div class="creature-home" id="creatureHome">
                    <!-- Animated creature will be loaded here -->
                </div>
            </div>
            
            <header class="card-header">
                <div class="section-icon animated-icon">
                    <svg viewBox="0 0 48 48">
                        <path class="icon-path" d="M4 6h8c2.2 0 4 1.8 4 4v28c0-1.7-1.3-3-3-3H4V6zm40 0h-8c-2.2 0-4 1.8-4 4v28c0-1.7 1.3-3 3-3h9V6z"/>
                    </svg>
                </div>
                <h2 class="section-title">What We Explored</h2>
            </header>
            
            <div class="subject-badge magical-badge">Fractions: Solving the Pizza Slice Puzzle</div>
            
            <div class="card-content touchable" data-read-aloud="true">
                <p class="learning-content">
                    Today's adventure: We figured out why you can't add different kinds of things, whether it's apples and oranges or different-sized pizza slices. We discovered that to add fractions like 1/3 and 1/4, we first need to make the pieces the same size. This is called finding a common denominator. We explored how to create 'equivalent fractions' (like turning 1/3 into 4/12), which is like cutting the same amount of pizza into more, smaller slices so they match a friend's. The coolest part was our 'Aha!' moment when we realized that 1/3 + 1/4 isn't 2/7 because the slices are different sizes, but it's really 7/12 once all the slices are the same size. This will help you do everything from adjusting a recipe to sharing snacks fairly.
                </p>
            </div>
        </section>

        
        <!-- Activity Section -->
        <section class="content-card floating-card activity-card" data-sound="chime" data-creature="rocket">
            <div class="card-background-effect"></div>
            
            <header class="card-header">
                <div class="section-icon animated-icon">
                    <svg viewBox="0 0 48 48">
                        <circle cx="24" cy="24" r="20" class="clock-circle"/>
                        <path class="clock-hand" d="M24 12v12l8 4"/>
                    </svg>
                </div>
                <h2 class="section-title">Your Mission</h2>
            </header>
            
            <div class="mission-name">üéØ The Paper Folding Fraction Challenge</div>
            
            <div class="card-content touchable" data-read-aloud="true">
                <div class="mission-description">
                    <p>Your mission: Grab two identical pieces of paper. Step 1: Fold one piece neatly into 3 equal sections (thirds). Step 2: Fold the other piece into 4 equal sections (fourths). Notice how the fold lines don't match up? Step 3: Now, figure out how you can fold BOTH pieces of paper so that all the fold lines match perfectly across both sheets. (Hint: Think about the common denominator we used in class!) Bonus challenge: Try it again with thirds and fifths!</p>
                </div>
                
                <div class="mission-motivation">
                    <span class="sparkle-text">‚ú® Why it's amazing:</span>
                    <p>This activity is amazing because it turns an abstract math rule into something you can see and touch. It helps your brain build a strong, physical memory of why common denominators are necessary. You'll develop problem-solving skills and see math in a whole new way! Plus, you can show your family and explain exactly why the folds have to match, which is a great way to prove you're a fraction master.</p>
                </div>
            </div>
            
            <!-- Hidden treasure that appears on shake -->
            <div class="hidden-treasure" id="hiddenTreasure">
                <span class="treasure-emoji">üéÅ</span>
                <p class="treasure-message">Secret discovered! You're amazing!</p>
            </div>
        </section>

        
        <!-- Parent Update -->
        <section class="content-card floating-card parent-card" data-sound="notification">
            <div class="card-background-effect"></div>
            
            <header class="card-header">
                <div class="section-icon animated-icon">
                    <svg viewBox="0 0 48 48">
                        <path d="M31 28v-4c0-3.3-2.7-6-6-6h-10c-3.3 0-6 2.7-6 6v4"/>
                        <circle cx="20" cy="10" r="6"/>
                        <path d="M39 28v-4c0-2.8-1.9-5.1-4.5-5.8"/>
                        <path d="M33 4.2c2.6.7 4.5 3 4.5 5.8s-1.9 5.1-4.5 5.8"/>
                    </svg>
                </div>
                <h2 class="section-title">Family Update</h2>
            </header>
            
            <div class="parent-report-grid">
                <div class="report-item">
                    <h3 class="report-label">Today's Focus</h3>
                    <p>Development of conceptual understanding for adding fractions with unlike denominators through the use of tangible analogies.</p>
                </div>
                
                <div class="report-item">
                    <h3 class="report-label">Progress Made</h3>
                    <p>Key concepts: The 'why' behind common denominators (pieces must be the same size to be added, like with our pizza analogy), the method for finding a common denominator (multiplying the denominators), and the process of creating equivalent fractions (resizing the pieces while keeping the value the same, e.g., 1/4 is the same as 3/12).</p>
                </div>
                
                
                <div class="report-item">
                    <h3 class="report-label">Home Practice</h3>
                    <p>Recipe Detective: Have Alex look at a simple recipe with you and find two ingredients with different fractional amounts (e.g., 1/2 cup of sugar, 1/3 cup of oil). His task is to write down the two fractions and then find a common denominator and write the two new equivalent fractions. No addition required yet! This reinforces the core skill of this lesson. Expected time: 5-10 minutes.</p>
                </div>
                
                
                
                <div class="report-item">
                    <h3 class="report-label">Special Notes</h3>
                    <p>üí° Breakthrough moment: Alex asked a brilliant question about why we can't just add the denominators. This shows he is thinking critically and not just memorizing rules. Growth area: We are continuing to build fluency in creating equivalent fractions. Practice helps make this process automatic. Ask your child to explain the 'pizza problem' (1/3 + 1/4) to you. To support at home: Use measuring cups (1/3 and 1/4) and ask which is bigger and how you could make them 'talk to each other' using a smaller cup size (like 1/12).</p>
                </div>
                
            </div>
        </section>

        <!-- Arcade Portal -->
        <section class="arcade-portal-section">
            <div class="portal-container">
                <div class="portal-rings">
                    <div class="ring ring-1"></div>
                    <div class="ring ring-2"></div>
                    <div class="ring ring-3"></div>
                </div>
                
                <a href="https://amanrajyadav.github.io/fluence-quiz/" class="arcade-button magical-button">
                    <span class="button-bg"></span>
                    <span class="button-text">Enter Learning Arcade</span>
                    <span class="button-icon">üéÆ</span>
                </a>
            </div>
        </section>
    </main>

    <!-- Shake Message Overlay -->
    <div class="shake-overlay" id="shakeOverlay">
        <div class="stardust-container" id="stardustContainer"></div>
        <div class="shake-message">
            <h3>‚ú® Magic Unlocked! ‚ú®</h3>
            <p>You found a hidden surprise!</p>
        </div>
    </div>

    <!-- Scripts -->
    <script src="../assets/js/universe.js"></script>
    <script src="../assets/js/creatures.js"></script>
    <script src="../assets/js/audio.js"></script>
    <script src="../assets/js/particles.js"></script>
    <script src="../assets/js/tree.js"></script>
    <script src="../assets/js/magic.js"></script>
    
    <script>
        // Initialize with student data
        window.STUDENT_DATA = {
            name: 'Dear Student',
            id: 'student',
            hue: 18,
            subject: 'Fractions: Solving the Pizza Slice Puzzle',
            visitCount: parseInt(localStorage.getItem('visits_student') || '0') + 1
        };
        
        // Start the magic
        document.addEventListener('DOMContentLoaded', () => {
            Universe.init();
        });
    </script>
</body>
</html>