<!DOCTYPE html>
<html lang="en" data-theme="minimal">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Dear Student · Learning Universe</title>
    <meta name="description" content="A magical learning journey">
    
    <!-- Preload critical assets -->
    <link rel="preload" href="../assets/sounds/ambient/morning-forest.mp3" as="audio">
    <link rel="preload" href="../assets/sprites/creatures/math-dragon.svg" as="image">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=EB+Garamond:ital,wght@0,400;0,600;1,400&family=Caveat:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="../assets/css/themes/minimal.css" id="theme-stylesheet">
    
    <style>
        /* Dynamic student color */
        :root {
            --student-hue: 18;
            --student-accent: hsl(var(--student-hue), 70%, 60%);
            --student-accent-soft: hsl(var(--student-hue), 60%, 95%);
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-content">
            <div class="magic-circle">
                <svg viewBox="0 0 200 200">
                    <circle cx="100" cy="100" r="80" class="circle-outer" />
                    <circle cx="100" cy="100" r="60" class="circle-middle" />
                    <circle cx="100" cy="100" r="40" class="circle-inner" />
                </svg>
            </div>
            <p class="loading-text">Preparing your magical journey...</p>
        </div>
    </div>

    <!-- Theme Toggle -->
    <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
        <span class="theme-icon-minimal">✨</span>
        <span class="theme-icon-cosmic">🌙</span>
    </button>

    <!-- Living Background -->
    <div class="universe-container">
        <!-- WebGL Canvas for advanced effects -->
        <canvas id="magicCanvas"></canvas>
        
        <!-- Parallax Layers -->
        <div class="parallax-layer" data-depth="0.1">
            <div class="clouds"></div>
        </div>
        <div class="parallax-layer" data-depth="0.3">
            <div class="floating-elements"></div>
        </div>
        <div class="parallax-layer" data-depth="0.5">
            <div class="fireflies"></div>
        </div>
        
        <!-- Seasonal Overlay -->
        <div class="seasonal-overlay" id="seasonalOverlay"></div>
    </div>

    <!-- Learning Tree (Fixed Position) -->
    <div class="learning-tree-container">
        <div class="tree-stage" id="learningTree">
            <!-- Tree will be drawn here by tree.js -->
        </div>
        <div class="tree-info">
            <span class="visits-count">Visit #<span id="visitNumber">1</span></span>
            <span class="tree-stage-name" id="treeStageName">Seedling</span>
        </div>
    </div>

    <!-- Walking Animals Container -->
    <div class="animals-container" id="animalsContainer">
        <!-- Animated sprites will be added by creatures.js -->
    </div>

    <!-- Audio Controls -->
    <div class="audio-controls">
        <button class="audio-ambient active" id="ambientToggle" aria-label="Toggle ambient sounds">
            <svg viewBox="0 0 24 24">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 14.5v-9l6 4.5-6 4.5z"/>
            </svg>
        </button>
        <div class="volume-slider">
            <input type="range" id="volumeControl" min="0" max="100" value="50">
        </div>
    </div>

    <!-- Main Content -->
    <main class="content-wrapper">
        <!-- Hero Section -->
        <section class="hero-section" id="heroSection">
            <div class="hero-particles" id="heroParticles"></div>
            
            <div class="date-badge floating">22 July 2025</div>
            
            <h1 class="student-name magical-text">
                Dear Student
                <span class="name-sparkles"></span>
            </h1>
            
            <p class="hero-greeting">Welcome back to your learning universe</p>
            
            <!-- Student Avatar with Aura -->
            <div class="student-avatar-container">
                <div class="avatar-aura"></div>
                <div class="student-avatar" id="studentAvatar">
                    <div class="avatar-inner" data-initial="S"></div>
                </div>
            </div>
        </section>

        <!-- Today's Reflection -->
        <section class="content-card floating-card" data-sound="page-turn" data-creature="star">
            <div class="card-background-effect"></div>
            
            <header class="card-header">
                <div class="section-icon animated-icon">
                    <svg viewBox="0 0 48 48">
                        <path class="icon-path" d="M24 4l5.5 11.1L42 17l-9 8.8L35.1 38 24 32.2 12.9 38 15 25.8 6 17l12.5-1.9z"/>
                    </svg>
                </div>
                <h2 class="section-title">Today's Reflection</h2>
            </header>
            
            <div class="card-content touchable" data-read-aloud="true">
                <p class="reflection-text">
                    🌟 Amazing work today, Mamta! You took on the challenge of two big subjects, Math and Social Science, at the same time. Your persistence in figuring out the math patterns, even when it was tricky, is a sign of a strong, growing brain! 🚀
                </p>
            </div>
            
            <div class="tap-hint">Tap to hear • Long press for Hindi</div>
        </section>

        <!-- Learning Content -->
        <section class="content-card floating-card" data-sound="page-turn" data-creature="math-dragon">
            <div class="card-background-effect"></div>
            
            <!-- Subject Creature -->
            <div class="subject-creature-container">
                <div class="creature-home" id="creatureHome">
                    <!-- Animated creature will be loaded here -->
                </div>
            </div>
            
            <header class="card-header">
                <div class="section-icon animated-icon">
                    <svg viewBox="0 0 48 48">
                        <path class="icon-path" d="M4 6h8c2.2 0 4 1.8 4 4v28c0-1.7-1.3-3-3-3H4V6zm40 0h-8c-2.2 0-4 1.8-4 4v28c0-1.7 1.3-3 3-3h9V6z"/>
                    </svg>
                </div>
                <h2 class="section-title">What We Explored</h2>
            </header>
            
            <div class="subject-badge magical-badge">Math & Culture: Uncovering the Hidden Codes of Our World</div>
            
            <div class="card-content touchable" data-read-aloud="true">
                <p class="learning-content">
                    Today's adventure was all about finding hidden patterns! We discovered that patterns aren't just in math; they're everywhere. We started with the clear, beautiful patterns of square numbers (like 3x3=9, 4x4=16). Then, we explored a much more complex pattern: how India shows 'Unity in Diversity'. Think of it like a giant, beautiful quilt—every patch is different (different foods, clothes, stories), but they are all stitched together to make one amazing thing: India! The coolest part was learning how stories like the Mahabharata have hundreds of different versions, proving that culture is something everyone helps create. This skill of spotting underlying rules will help you understand everything from coding a game to appreciating why different people have different traditions.
                </p>
            </div>
        </section>

        
        <!-- Activity Section -->
        <section class="content-card floating-card activity-card" data-sound="chime" data-creature="rocket">
            <div class="card-background-effect"></div>
            
            <header class="card-header">
                <div class="section-icon animated-icon">
                    <svg viewBox="0 0 48 48">
                        <circle cx="24" cy="24" r="20" class="clock-circle"/>
                        <path class="clock-hand" d="M24 12v12l8 4"/>
                    </svg>
                </div>
                <h2 class="section-title">Your Mission</h2>
            </header>
            
            <div class="mission-name">🎯 Pattern Detective: Home Edition!</div>
            
            <div class="card-content touchable" data-read-aloud="true">
                <div class="mission-description">
                    <p>Your mission: Become a pattern detective in your own home! Step 1: Find and sketch one 'math pattern' (like the tiles on the floor, windows on a building, or petals on a plant). Step 2: Find and describe one 'culture pattern' that shows unity in diversity (like how your family cooks foods from different regions, but it's all 'our family's food'). Step 3: Explain the 'rule' for both patterns. What makes the math pattern work? What makes the culture pattern special? Bonus challenge: Can you find a pattern that is both mathematical AND cultural, like the geometric designs in a rangoli or on a sari border?</p>
                </div>
                
                <div class="mission-motivation">
                    <span class="sparkle-text">✨ Why it's amazing:</span>
                    <p>This activity is amazing because it trains your brain to see connections that others miss. You'll strengthen your observation and critical thinking skills, turning your everyday world into a puzzle waiting to be solved! Plus, you can show your family the hidden patterns you've uncovered and teach them what you learned.</p>
                </div>
            </div>
            
            <!-- Hidden treasure that appears on shake -->
            <div class="hidden-treasure" id="hiddenTreasure">
                <span class="treasure-emoji">🎁</span>
                <p class="treasure-message">Secret discovered! You're amazing!</p>
            </div>
        </section>

        
        <!-- Parent Update -->
        <section class="content-card floating-card parent-card" data-sound="notification">
            <div class="card-background-effect"></div>
            
            <header class="card-header">
                <div class="section-icon animated-icon">
                    <svg viewBox="0 0 48 48">
                        <path d="M31 28v-4c0-3.3-2.7-6-6-6h-10c-3.3 0-6 2.7-6 6v4"/>
                        <circle cx="20" cy="10" r="6"/>
                        <path d="M39 28v-4c0-2.8-1.9-5.1-4.5-5.8"/>
                        <path d="M33 4.2c2.6.7 4.5 3 4.5 5.8s-1.9 5.1-4.5 5.8"/>
                    </svg>
                </div>
                <h2 class="section-title">Family Update</h2>
            </header>
            
            <div class="parent-report-grid">
                <div class="report-item">
                    <h3 class="report-label">Today's Focus</h3>
                    <p>Development of abstract reasoning and analytical skills by bridging mathematical concepts with socio-cultural analysis.</p>
                </div>
                
                <div class="report-item">
                    <h3 class="report-label">Progress Made</h3>
                    <p>Key concepts: Defining rules for number sequences (specifically square numbers), the concept of 'Unity in Diversity', and using Indian epics (Ramayana/Mahabharata) and the sari as case studies for cultural adaptation. We used specific examples like K.S. Singh's research to move from theory to real-world evidence.</p>
                </div>
                
                
                <div class="report-item">
                    <h3 class="report-label">Home Practice</h3>
                    <p>The 'Pattern Detective: Home Edition' activity. Ask Mamta to find one mathematical pattern and one cultural pattern at home and explain the 'rule' behind each. This reinforces observation and analytical skills for both subjects. Expected time: 15-20 minutes.</p>
                </div>
                
                
                
                <div class="report-item">
                    <h3 class="report-label">Special Notes</h3>
                    <p>💡 Breakthrough moment: Mamta's verbal struggle to define the rule for square numbers was a fantastic learning moment. She moved from a vague idea ('adding') to a more precise one ('multiplying by itself') through guided questioning. This is a crucial step in developing logical thinking. Growth area: Mamta has a good recall of facts in Social Science. Our focus now is to build her confidence in elaborating on *why* those facts matter. We will practice connecting evidence to a main argument. Ask your child about 'the 100 versions of the Mahabharata in Tamil Nadu'—it's a fascinating fact she learned. To support at home: When watching a movie or reading a story, ask 'How is this character/place similar to others we know, and how is it different?' This makes analyzing for 'unity in diversity' a fun, natural habit.</p>
                </div>
                
            </div>
        </section>

        <!-- Arcade Portal -->
        <section class="arcade-portal-section">
            <div class="portal-container">
                <div class="portal-rings">
                    <div class="ring ring-1"></div>
                    <div class="ring ring-2"></div>
                    <div class="ring ring-3"></div>
                </div>
                
                <a href="https://amanrajyadav.github.io/fluence-quiz/" class="arcade-button magical-button">
                    <span class="button-bg"></span>
                    <span class="button-text">Enter Learning Arcade</span>
                    <span class="button-icon">🎮</span>
                </a>
            </div>
        </section>
    </main>

    <!-- Shake Message Overlay -->
    <div class="shake-overlay" id="shakeOverlay">
        <div class="stardust-container" id="stardustContainer"></div>
        <div class="shake-message">
            <h3>✨ Magic Unlocked! ✨</h3>
            <p>You found a hidden surprise!</p>
        </div>
    </div>

    <!-- Scripts -->
    <script src="../assets/js/universe.js"></script>
    <script src="../assets/js/creatures.js"></script>
    <script src="../assets/js/audio.js"></script>
    <script src="../assets/js/particles.js"></script>
    <script src="../assets/js/tree.js"></script>
    <script src="../assets/js/magic.js"></script>
    
    <script>
        // Initialize with student data
        window.STUDENT_DATA = {
            name: 'Dear Student',
            id: 'student',
            hue: 18,
            subject: 'Math & Culture: Uncovering the Hidden Codes of Our World',
            visitCount: parseInt(localStorage.getItem('visits_student') || '0') + 1
        };
        
        // Start the magic
        document.addEventListener('DOMContentLoaded', () => {
            Universe.init();
        });
    </script>
</body>
</html>